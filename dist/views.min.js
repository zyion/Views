var Template=function(){var o={};return{build:function(n,e,i){o.hasOwnProperty(n)?"function"==typeof i&&i(!1,Handlebars.compile(o[n])(e)):$.ajax({method:"GET",url:n,datatype:"html"}).fail(function(t,n){"function"==typeof i&&i(n)}).done(function(t){o[n]=$(t).html(),"function"==typeof i&&i(!1,Handlebars.compile(o[n])(e))})},register:function(n,t,e){$.ajax({method:"GET",url:t,datatype:"html"}).fail(function(t,n){"function"==typeof e&&e(n)}).done(function(t){Handlebars.registerPartial(n,$(t).html()),"function"==typeof e&&e(!1,textStatus)})}}}(),Views=function(){function i(t,n,e){this.name=t,this.partial=n,this.data=e}function a(t,n,e){$.when($.ajax({method:"GET",url:t,datatype:"html"}),$.ajax({method:"GET",url:n,datatype:"json"})).fail(function(t,n){"function"==typeof e&&e(n)}).done(function(t,n){"function"==typeof e&&e(!1,Handlebars.compile(t[0])(n[0]))})}return function(t){var e;this.views={},this.container=t,e=this,window.onpopstate=function(t){if(e.views.hasOwnProperty(t.state)){var n=e.views[t.state];a(n.partial,n.data,function(t,n){t?console.error("View rendering error",t):$(e.container).html(n)})}},this.add=function(t,n,e){this.views[t]=new i(t,n,e)},this.show=function(t,n){var e,i,o;this.views.hasOwnProperty(t)?(e=this.container,i=this.views[t],o=n,a(i.partial,i.data,function(t,n){t?console.error("View rendering error",t):($(e).html(n),history.pushState(i.name,i.name,i.name),"function"==typeof o&&o())})):console.error("View not found",t)}}}();